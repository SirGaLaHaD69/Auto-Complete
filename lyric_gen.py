{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 1000
    },
    "colab_type": "code",
    "id": "xfNzSeHkDJlQ",
    "outputId": "c9f7e4b2-73c8-44b0-c52d-482b3b441852"
   },
   "outputs": [],
   "source": [
    "import numpy as np\n",
    "\n",
    "# Transition table\n",
    "def generate_table(text, k = 4):\n",
    "    table = {}\n",
    "    \n",
    "    # Frequencies\n",
    "    for i in range(len(text) - k):\n",
    "        kx = text[i : i + k]\n",
    "        ky = text[i + k]\n",
    "        if table.get(kx) is None:\n",
    "            table[kx] = {}\n",
    "            table[kx][ky] = 1\n",
    "        else:\n",
    "            if table[kx].get(ky) is None:\n",
    "                table[kx][ky] = 1\n",
    "            else:\n",
    "                table[kx][ky] += 1\n",
    "    \n",
    "    # Probabilites\n",
    "    for kx in table.keys():\n",
    "        s = float(sum(table[kx].values()))\n",
    "        for ky in table[kx].keys():\n",
    "            table[kx][ky] /= s\n",
    "    \n",
    "    return table\n",
    "\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [],
   "source": [
    "def load_text(filename):\n",
    "    with open(filename, encoding='utf8') as f:\n",
    "        return f.read().lower()\n",
    "\n",
    "text = load_text('beautiful.txt')\n",
    "\n",
    "model = generate_table(text)\n",
    "\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "\"lately i've been hard to reach\\ni've been too long on my own\\neverybody has a private world\\nwhere they can be alone\\nare you calling me, are you trying to get through\\nare you reaching out for me, and i'm reaching out for you\\ni'm just so fuckin' depressed\\ni just can't seem to get out this slump\\nif i could just get over this hump\\nbut i need something to pull me out this dump\\ni took my bruises, took my lumps\\nfell down and i got right back up\\nbut i need that spark to get psyched back up\\nin order for me to pick that mic back up\\ni don't know how or why or when\\nand i ended up in this position i'm in\\ni'm starting to feel distant again\\nso i decided just to pick this pen\\nup and tried to make an attempt to vent, but i just can't admit\\nor come to grips, with the fact that\\ni may be done with rap, i need a new outlet\\nand i know some shits so hard to swallow\\nbut i just can't sit back and wallow\\nin my own sorrow, but i know one fact\\ni'll be one tough act to follow\\none tough act to follow, copy, one tough act to follow\\nhere today, gone tomorrow\\nbut you have to walk a thousand miles\\nin my shoes, just to see\\nwhat it's like, to be me\\ni'll be you, let's trade shoes\\njust to see what i'd be like to\\nfeel your pain, you feel mine\\ngo inside each other's minds\\njust to see what we find\\nlook at shit through each other's eyes\\nbut don't let 'em say you ain't beautiful oh\\nthey can all get fucked, just stay true to you so\\ndon't let 'em say you ain't beautiful oh\\nthey can all get fucked, just stay true to you so\\ni think i'm starting to lose my sense of humor\\neverything is so tense and gloom\\ni almost feel like i gotta check the temperature in the room\\njust as soon as i walk in\\nit's like all eyes on me, so i try to avoid any eye contact\\n'cause if i do that then it opens a door to conversation, like i want that\\ni'm not looking for extra attention\\ni just want to be just like you\\nblend in with the rest of the room\\nmaybe just point me to the closest restroom\\ni don't need no fucking manservant\\ntrying to follow me around, and wipe my ass\\nlaugh at every single joke i crack\\nand half of 'em ain't even funny like hahaha\\nmarshall, you're so funny man, you should be a comedian, god damn\\nunfortunately i am, but i just hide behind the tears of a clown\\nso why don't you all sit down\\nlisten to the tale i'm about to tell\\nhell, we don't have to trade our shoes\\nand you don't have to walk no thousand miles\\nin my shoes, just to see\\nwhat it's be like, to be me\\ni'll be you, let's trade shoes\\njust to see what i'd be like to\\nfeel your pain, you feel mine\\ngo inside each other's minds\\njust to see what we find\\nlook at shit through each other's eyes\\nbut don't let 'em say you ain't beautiful oh\\nthey can all get fucked, just stay true to you so\\ndon't let 'em say you ain't beautiful oh\\nthey can all get fucked, just stay true to you so\\nnobody asked for life to deal us\\nwith these bullshit hands we're dealt\\nwe gotta take these cards ourselves\\nand flip them, don't expect no help\\nnow i could have either just sat on my ass and pissed and moaned\\nor take this situation in which i'm placed in\\nand get up and get my own, i was never the type of kid\\nto wait by the door and pack his bags\\nor sat on the porch and hoped and prayed\\nfor a dad to show up who never did\\ni just wanted to fit in, every single place, every school i went\\ni dreamed of being that cool kid\\neven if it meant acting stupid, aunt edna always told me\\nkeep making that face till it gets stuck like that\\nmeanwhile i'm just standing there\\nholding my tongue up trying to talk like this\\ntill i stuck my tongue on the frozen stop sign pole at eight years old\\ni learned my lesson and cause i wasn't tryin to impress my friends no more\\nbut i already told you my whole life story\\nnot just based on my description\\n'cause where you see it from where you're sitting\\nis probably a hundred and ten percent different\\ni guess we would have to walk a mile\\nin each other's shoes, at least\\nwhat size you wear? i wear tens\\nlet's see if you can fit your feet\\nin my shoes, just to see\\nwhat it's be like, to be me\\ni'll be you, let's trade shoes\\njust to see what i'd be like to\\nfeel your pain, you feel mine\\ngo inside each other's minds\\njust to see what we find\\nlook at shit through each other's eyes\\nbut don't let 'em say you ain't beautiful oh\\nthey can all get fucked, just stay true to you so\\ndon't let 'em say you ain't beautiful oh\\nthey can all get fucked, just stay true to you so\\nlately i've been hard to reach\\ni've been too long on my own\\neverybody has a private world\\nwhere they can be alone\\nare you calling me, are you trying to get through\\nare you reaching out for me, and i'm reaching out for you\\nyea, to my babies, stay strong, daddy will be home soon\\nand to the rest of the world, god gave you the shoes\\nthat fit you, so put em on and wear 'em\\nand be yourself man, be proud of who you are\\neven if it sounds corny\\ndon't ever let no one tell you, you ain't beautiful, so\""
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "text"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {
    "colab_type": "text",
    "id": "TwK2XJ_HDK6y"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "lately i've behind tried to vent, but yourself manservant\n",
      "trying out for life stop sign pole life to see what it's be me\n",
      "keep make think i'm just to follow me ourself manservant\n",
      "trying on the type of being man, god damn\n",
      "unfortunately i've behind the room\n",
      "i already to follow, copy, one tempt to get this position, like, to be like i could just like hahahaha\n",
      "marshall, we world, gone to you the show one to vent, but down\n",
      "even it get fucked, just to deal us\n",
      "with rap, i wear tense an attention i'm just to see\n",
      "what i'd be you so\n",
      "don't have to making me, are you ain't beautiful oh\n",
      "they can't learned my own, i need some soon\n",
      "and tense of kid\n",
      "to walk in\n",
      "and tried that we world, gone with the frozen story\n",
      "not looking for you ain't you feel yourself man, you feel minds\n",
      "just hide eaching to trade out to avoid any eye contact\n",
      "'cause if it opens a private world\n",
      "where you so\n",
      "i too long out for you\n",
      "i'm just to follow\n",
      "one to follow\n",
      "but done to follow\n",
      "one tell\n",
      "hell, we world, gone to see\n",
      "what it's trade shit through each other just stay true to see what we world\n",
      "where\n",
      "holding to wait back up\n",
      "in my asked for you all get fucked, just starting to pick the face till it from where to talk like alone\n",
      "are you tryin the clown\n",
      "so why don't let's trade shit through\n",
      "are you ain't have to be you my babies, just can all get this\n",
      "till be you calling to grips, with rap, i walk no thousand to be like, to pick this dump\n",
      "but i need no thousand flip the world, gone today, god damn\n",
      "unfortunately i am, but i am, but don't see\n",
      "what i'd be like hahahahahaha\n",
      "marshall, we don't know i could half of the room\n",
      "i almost feel distanding that mic back up\n",
      "i don't even if i crack\n",
      "and i gotta take an all get fucked, just stay true to\n",
      "feel like, to see what this\n",
      "till i want to get fucked, just to get fucked, just like you feel you so\n",
      "nobody has a private world, god damn\n",
      "unfortunately i've behind to you, let 'em say you, let no fucked, just to talk like, to the world\n",
      "where\n",
      "holding to tell down and to see\n",
      "what i'd be you tryin\n"
     ]
    }
   ],
   "source": [
    "def sample_next(context, model, k = 4):\n",
    "    context = context[-k : ]\n",
    "    if model.get(context) is None:\n",
    "        return ' '\n",
    "    poss_char = list(model[context].keys())\n",
    "    poss_prob = list(model[context].values())\n",
    "    return np.random.choice(a=poss_char, p=poss_prob)\n",
    "\n",
    "def generate_text(start_sent, model, k=4, maxLen=2000):\n",
    "    np.random.seed(seed=11)\n",
    "    sentence = start_sent\n",
    "    context = sentence[-k : ]\n",
    "    for i in range(maxLen):\n",
    "        next_char = sample_next(context, model, k)\n",
    "        sentence += next_char\n",
    "        context = sentence[-k : ]\n",
    "    return sentence\n",
    "\n",
    "generated_lyrics = generate_text('lately', model)\n",
    "print(generated_lyrics)\n",
    "\n",
    "with open('results.txt', 'w+', encoding='utf8') as f:\n",
    "    f.write(generated_lyrics)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "colab_type": "text",
    "id": "oIOeKYyFDK9Y"
   },
   "source": []
  }
 ],
 "metadata": {
  "colab": {
   "name": "lyric_gen.ipynb",
   "provenance": []
  },
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.3"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 1
}
